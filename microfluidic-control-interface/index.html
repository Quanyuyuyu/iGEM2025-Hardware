<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>微流控测试平台控制中心</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <!-- 配置Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36CFC9',
                        success: '#52C41A',
                        warning: '#FAAD14',
                        danger: '#FF4D4F',
                        dark: '#1F2329',
                        'light-bg': '#F5F7FA'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .device-card {
                @apply bg-white rounded-lg shadow-md p-4 transition-all duration-300 hover:shadow-lg;
            }
            .status-indicator {
                @apply w-3 h-3 rounded-full inline-block mr-2;
            }
            .control-btn {
                @apply px-4 py-2 rounded-md text-white font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
            }
            .panel {
                @apply bg-white rounded-lg shadow-sm p-5 h-full;
            }
        }
    </style>
</head>
<body class="bg-light-bg text-dark min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm fixed top-0 left-0 right-0 z-10">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <i class="fa fa-flask text-primary text-2xl"></i>
                <h1 class="text-xl font-bold text-primary">微流控测试平台</h1>
            </div>
            
            <div class="flex items-center space-x-6">
                <button class="text-gray-600 hover:text-primary transition-colors">
                    <i class="fa fa-question-circle"></i>
                    <span class="ml-1">帮助</span>
                </button>
                <button class="text-gray-600 hover:text-primary transition-colors">
                    <i class="fa fa-user-circle"></i>
                    <span class="ml-1">igem团队</span>
                </button>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 pt-20 pb-10">
        <!-- 状态概览 -->
        <section class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold">系统状态</h2>
                <div class="flex items-center">
                    <span class="text-sm text-gray-500 mr-2">最后更新:</span>
                    <span class="text-sm" id="last-update">2023-05-15 14:30:22</span>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="device-card border-l-4 border-primary">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-medium">液体传输系统</h3>
                            <p class="text-sm text-gray-500 mt-1">泵 × 3 | 阀门 × 8</p>
                        </div>
                        <span class="bg-green-100 text-success text-xs px-2 py-1 rounded-full">
                            <i class="fa fa-check-circle mr-1"></i>正常运行
                        </span>
                    </div>
                </div>
                
                <div class="device-card border-l-4 border-secondary">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-medium">检测系统</h3>
                            <p class="text-sm text-gray-500 mt-1">光谱仪 × 1 | 成像模块 × 1</p>
                        </div>
                        <span class="bg-green-100 text-success text-xs px-2 py-1 rounded-full">
                            <i class="fa fa-check-circle mr-1"></i>正常运行
                        </span>
                    </div>
                </div>
                
                <div class="device-card border-l-4 border-warning">
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="font-medium">当前任务</h3>
                            <p class="text-sm text-gray-500 mt-1">实验ID: EXP-20230515-002</p>
                        </div>
                        <span class="bg-blue-100 text-primary text-xs px-2 py-1 rounded-full">
                            <i class="fa fa-spinner fa-spin mr-1"></i>进行中
                        </span>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 主要控制区域 -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- 左侧：设备控制 -->
            <div class="lg:col-span-2 space-y-6">
                <!-- 液体传输控制 -->
                <section>
                    <h2 class="text-xl font-semibold mb-4">液体传输控制</h2>
                    <div class="panel">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- 泵控制 -->
                            <div>
                                <h3 class="font-medium mb-3 flex items-center">
                                    <i class="fa fa-tint text-primary mr-2"></i>
                                    泵控制
                                </h3>
                                
                                <div class="space-y-4">
                                    <!-- 泵1 -->
                                    <div class="border border-gray-200 rounded-lg p-3">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-medium">泵1 (蛋白液)</span>
                                            <span class="flex items-center text-success text-sm">
                                                <span class="status-indicator bg-success"></span>
                                                就绪
                                            </span>
                                        </div>
                                        
                                        <div class="grid grid-cols-2 gap-3 mb-3">
                                            <div>
                                                <label class="block text-xs text-gray-500 mb-1">流量 (μL/min)</label>
                                                <input type="number" class="w-full border border-gray-300 rounded-md px-2 py-1 text-sm" value="50">
                                            </div>
                                            <div>
                                                <label class="block text-xs text-gray-500 mb-1">时间 (s)</label>
                                                <input type="number" class="w-full border border-gray-300 rounded-md px-2 py-1 text-sm" value="10">
                                            </div>
                                        </div>
                                        
                                        <div class="flex space-x-2">
                                            <button class="control-btn bg-primary flex-1">
                                                <i class="fa fa-play mr-1"></i>启动
                                            </button>
                                            <button class="control-btn bg-gray-500 flex-1">
                                                <i class="fa fa-stop mr-1"></i>停止
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- 泵2 -->
                                    <div class="border border-gray-200 rounded-lg p-3">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-medium">泵2 (缓冲液A)</span>
                                            <span class="flex items-center text-success text-sm">
                                                <span class="status-indicator bg-success"></span>
                                                就绪
                                            </span>
                                        </div>
                                        
                                        <div class="grid grid-cols-2 gap-3 mb-3">
                                            <div>
                                                <label class="block text-xs text-gray-500 mb-1">流量 (μL/min)</label>
                                                <input type="number" class="w-full border border-gray-300 rounded-md px-2 py-1 text-sm" value="30">
                                            </div>
                                            <div>
                                                <label class="block text-xs text-gray-500 mb-1">时间 (s)</label>
                                                <input type="number" class="w-full border border-gray-300 rounded-md px-2 py-1 text-sm" value="15">
                                            </div>
                                        </div>
                                        
                                        <div class="flex space-x-2">
                                            <button class="control-btn bg-primary flex-1">
                                                <i class="fa fa-play mr-1"></i>启动
                                            </button>
                                            <button class="control-btn bg-gray-500 flex-1">
                                                <i class="fa fa-stop mr-1"></i>停止
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 阀门控制 -->
                            <div>
                                <h3 class="font-medium mb-3 flex items-center">
                                    <i class="fa fa-exchange text-primary mr-2"></i>
                                    阀门控制
                                </h3>
                                
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="border border-gray-200 rounded-lg p-3 text-center">
                                        <span class="block text-sm mb-2">阀门1</span>
                                        <div class="flex justify-center space-x-2 mb-2">
                                            <button class="px-3 py-1 bg-success text-white text-xs rounded">开</button>
                                            <button class="px-3 py-1 bg-gray-200 text-gray-700 text-xs rounded">关</button>
                                        </div>
                                        <span class="text-xs text-gray-500">通向芯片入口A</span>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded-lg p-3 text-center">
                                        <span class="block text-sm mb-2">阀门2</span>
                                        <div class="flex justify-center space-x-2 mb-2">
                                            <button class="px-3 py-1 bg-gray-200 text-gray-700 text-xs rounded">开</button>
                                            <button class="px-3 py-1 bg-danger text-white text-xs rounded">关</button>
                                        </div>
                                        <span class="text-xs text-gray-500">通向芯片入口B</span>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded-lg p-3 text-center">
                                        <span class="block text-sm mb-2">阀门3</span>
                                        <div class="flex justify-center space-x-2 mb-2">
                                            <button class="px-3 py-1 bg-gray-200 text-gray-700 text-xs rounded">开</button>
                                            <button class="px-3 py-1 bg-danger text-white text-xs rounded">关</button>
                                        </div>
                                        <span class="text-xs text-gray-500">通向废液槽</span>
                                    </div>
                                    
                                    <div class="border border-gray-200 rounded-lg p-3 text-center">
                                        <span class="block text-sm mb-2">阀门4</span>
                                        <div class="flex justify-center space-x-2 mb-2">
                                            <button class="px-3 py-1 bg-success text-white text-xs rounded">开</button>
                                            <button class="px-3 py-1 bg-gray-200 text-gray-700 text-xs rounded">关</button>
                                        </div>
                                        <span class="text-xs text-gray-500">检测通道</span>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <button class="w-full py-2 border border-primary text-primary rounded-md hover:bg-primary hover:text-white transition-colors">
                                        <i class="fa fa-random mr-1"></i>预设通路模式
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- 检测控制 -->
                <section>
                    <h2 class="text-xl font-semibold mb-4">检测控制</h2>
                    <div class="panel">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- 光谱检测 -->
                            <div>
                                <h3 class="font-medium mb-3 flex items-center">
                                    <i class="fa fa-line-chart text-secondary mr-2"></i>
                                    光谱检测
                                </h3>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium mb-1">检测波长范围</label>
                                        <div class="flex items-center space-x-2">
                                            <input type="number" class="flex-1 border border-gray-300 rounded-md px-2 py-1 text-sm" value="400" placeholder="起始 (nm)">
                                            <span>-</span>
                                            <input type="number" class="flex-1 border border-gray-300 rounded-md px-2 py-1 text-sm" value="700" placeholder="结束 (nm)">
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium mb-1">检测模式</label>
                                        <select class="w-full border border-gray-300 rounded-md px-2 py-1 text-sm">
                                            <option>吸光度</option>
                                            <option>荧光</option>
                                            <option>透射率</option>
                                        </select>
                                    </div>
                                    
                                    <button class="w-full control-btn bg-secondary">
                                        <i class="fa fa-search mr-1"></i>开始光谱检测
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 成像检测 -->
                            <div>
                                <h3 class="font-medium mb-3 flex items-center">
                                    <i class="fa fa-camera text-secondary mr-2"></i>
                                    成像检测
                                </h3>
                                
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium mb-1">成像参数</label>
                                        <div class="grid grid-cols-2 gap-2">
                                            <div>
                                                <label class="block text-xs text-gray-500 mb-1">曝光时间 (ms)</label>
                                                <input type="number" class="w-full border border-gray-300 rounded-md px-2 py-1 text-sm" value="50">
                                            </div>
                                            <div>
                                                <label class="block text-xs text-gray-500 mb-1">放大倍数</label>
                                                <select class="w-full border border-gray-300 rounded-md px-2 py-1 text-sm">
                                                    <option>10x</option>
                                                    <option selected>20x</option>
                                                    <option>40x</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3 bg-gray-100 h-32 rounded flex items-center justify-center">
                                        <span class="text-gray-400 text-sm">实时图像预览区域</span>
                                    </div>
                                    
                                    <button class="w-full control-btn bg-secondary">
                                        <i class="fa fa-camera mr-1"></i>捕获图像
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- 实验流程 -->
                <section>
                    <h2 class="text-xl font-semibold mb-4">实验流程设计</h2>
                    <div class="panel">
                        <div class="flex justify-between items-center mb-4">
                            <div>
                                <h3 class="font-medium">当前流程: 蛋白反应检测</h3>
                                <p class="text-sm text-gray-500">包含 5 个步骤 | 预计时长: 15分钟</p>
                            </div>
                            <button class="text-primary text-sm hover:underline">
                                <i class="fa fa-save mr-1"></i>保存流程
                            </button>
                        </div>
                        
                        <!-- 流程步骤 -->
                        <div class="space-y-3 mb-4">
                            <div class="flex items-center p-3 bg-blue-50 border border-blue-100 rounded-md">
                                <div class="w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-xs mr-3">1</div>
                                <div class="flex-1">
                                    <div class="font-medium text-sm">注入蛋白液</div>
                                    <div class="text-xs text-gray-500">泵1 | 50μL/min | 10秒</div>
                                </div>
                                <button class="text-gray-400 hover:text-primary">
                                    <i class="fa fa-pencil"></i>
                                </button>
                            </div>
                            
                            <div class="flex items-center p-3 bg-blue-50 border border-blue-100 rounded-md">
                                <div class="w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center text-xs mr-3">2</div>
                                <div class="flex-1">
                                    <div class="font-medium text-sm">注入缓冲液A</div>
                                    <div class="text-xs text-gray-500">泵2 | 30μL/min | 15秒</div>
                                </div>
                                <button class="text-gray-400 hover:text-primary">
                                    <i class="fa fa-pencil"></i>
                                </button>
                            </div>
                            
                            <div class="flex items-center p-3 bg-gray-50 border border-gray-200 rounded-md">
                                <div class="w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs mr-3">3</div>
                                <div class="flex-1">
                                    <div class="font-medium text-sm">混合反应</div>
                                    <div class="text-xs text-gray-500">静置 | 5分钟</div>
                                </div>
                                <button class="text-gray-400 hover:text-primary">
                                    <i class="fa fa-pencil"></i>
                                </button>
                            </div>
                            
                            <div class="flex items-center p-3 bg-gray-50 border border-gray-200 rounded-md">
                                <div class="w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs mr-3">4</div>
                                <div class="flex-1">
                                    <div class="font-medium text-sm">光谱检测</div>
                                    <div class="text-xs text-gray-500">400-700nm | 吸光度</div>
                                </div>
                                <button class="text-gray-400 hover:text-primary">
                                    <i class="fa fa-pencil"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button class="flex-1 py-2 border border-primary text-primary rounded-md hover:bg-primary hover:text-white transition-colors">
                                <i class="fa fa-plus mr-1"></i>添加步骤
                            </button>
                            <button class="flex-1 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors">
                                <i class="fa fa-play mr-1"></i>运行流程
                            </button>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- 右侧：监测与结果 -->
            <div class="space-y-6">
                <!-- 实时监测 -->
                <section>
                    <h2 class="text-xl font-semibold mb-4">实时监测</h2>
                    <div class="panel">
                        <div class="mb-4">
                            <h3 class="font-medium mb-2">反应进度</h3>
                            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-2">
                                <div class="bg-primary h-2.5 rounded-full" style="width: 35%"></div>
                            </div>
                            <div class="flex justify-between text-xs text-gray-500">
                                <span>步骤2/5</span>
                                <span>预计剩余: 9分钟</span>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h3 class="font-medium mb-2">实时数据</h3>
                            <div class="h-48">
                                <canvas id="realtimeChart"></canvas>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="font-medium mb-2">系统日志</h3>
                            <div class="bg-gray-50 rounded-md h-40 p-3 overflow-y-auto text-sm text-gray-600 text-left text-xs">
                                <p><span class="text-gray-400">[14:28:15]</span> 系统启动完成</p>
                                <p><span class="text-gray-400">[14:28:30]</span> 加载实验流程: 蛋白反应检测</p>
                                <p><span class="text-gray-400">[14:29:05]</span> 泵1启动: 50μL/min, 10秒</p>
                                <p><span class="text-gray-400">[14:29:15]</span> 泵1已停止</p>
                                <p><span class="text-gray-400">[14:29:20]</span> 泵2启动: 30μL/min, 15秒</p>
                                <p><span class="text-gray-400">[14:29:35]</span> 泵2已停止</p>
                                <p><span class="text-gray-400">[14:29:36]</span> 开始混合反应，等待5分钟</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- 检测结果 -->
                <section>
                    <h2 class="text-xl font-semibold mb-4">检测结果</h2>
                    <div class="panel">
                        <div class="mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="font-medium">最新光谱数据</h3>
                                <button class="text-xs text-primary hover:underline">查看历史</button>
                            </div>
                            <div class="h-40 bg-gray-50 rounded-md flex items-center justify-center">
                                <span class="text-gray-400 text-sm">光谱图将在此显示</span>
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <h3 class="font-medium">分析结果</h3>
                                <span class="text-xs bg-green-100 text-success px-2 py-0.5 rounded-full">已完成</span>
                            </div>
                            
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">反应程度:</span>
                                    <span class="font-medium">35%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">峰值波长:</span>
                                    <span class="font-medium">527 nm</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">浓度估算:</span>
                                    <span class="font-medium">0.32 mg/mL</span>
                                </div>
                                <div class="mt-3 pt-3 border-t border-gray-200">
                                    <p class="text-xs text-gray-500 mb-1">结果判定:</p>
                                    <p class="text-sm">反应正常进行中，建议继续监测。预计还需10分钟达到稳定状态。</p>
                                </div>
                            </div>
                            
                            <button class="w-full mt-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors text-sm">
                                <i class="fa fa-file-text-o mr-1"></i>生成详细报告
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <script>
        // 初始化实时数据图表
        const ctx = document.getElementById('realtimeChart').getContext('2d');
        const realtimeChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: Array.from({length: 20}, (_, i) => i),
                datasets: [{
                    label: '吸光度 (527nm)',
                    data: [0.12, 0.15, 0.18, 0.21, 0.25, 0.28, 0.31, 0.34, 0.37, 0.40, 0.42, 0.45, 0.47, 0.49, 0.51, 0.53, 0.55, 0.56, 0.57, 0.58],
                    borderColor: '#165DFF',
                    backgroundColor: 'rgba(22, 93, 255, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            font: {
                                size: 10
                            }
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 10
                            }
                        }
                    }
                }
            }
        });

        // 模拟实时数据更新
        setInterval(() => {
            // 更新时间戳
            const now = new Date();
            document.getElementById('last-update').textContent = now.toLocaleString();
            
            // 更新图表数据
            realtimeChart.data.datasets[0].data.shift();
            const lastValue = realtimeChart.data.datasets[0].data[realtimeChart.data.datasets[0].data.length - 1];
            const newValue = lastValue + (Math.random() * 0.02 - 0.005); // 小幅度随机波动
            realtimeChart.data.datasets[0].data.push(newValue);
            realtimeChart.update();
        }, 5000);
    </script>
</body>
</html>
